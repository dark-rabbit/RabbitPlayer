<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<link rel="stylesheet" href="../node_modules/normalize.css/normalize.css">
		<link rel="stylesheet" href="css/style.css">
	</head>

	<body ng-app="app" ng-controller="appCtrl">

		<!-- explorateur de fichiers -->
		<div id="file-explorer">

			<!-- input to popup file dialog -->
			<input id="file-dialog" style="display:none;" type="file" nwdirectory/>

			<!-- loading files animation -->
			<div id="loading-files" ng-show="loadingFiles">
				Loading...
			</div>

			<!-- file bar navigation -->
			<div ng-hide="loadingFiles" id="file-bar">

				<!-- change library (or refresh) (or -->
				<!-- <div id="refresh&#45;lib" ng&#45;show="files.length === 1" ng&#45;click="refreshLib()"> -->
				<!-- 	<i class="material&#45;icons">autorenew</i> -->
				<!-- </div> -->
				<div id="refresh-lib" ng-click="chooseLib()">
					<i class="material-icons">music_lib</i>
				</div>

				<!-- up a dir -->
				<div id="nav-back" ng-show="files.length > 1" ng-click="navBack()">
					<i class="material-icons">arrow_back</i>
				</div>

				<!-- album + info + search -->
				<input ng-model="searchPattern" id="album-info" type="text" placeholder="{{files[files.length - 1].name}}">
				
				<!-- clear search -->
				<div id="clear-search" ng-show="searchPattern.length" ng-click="searchPattern = ''">
					<i class="material-icons">clear</i>
				</div>
				
				<!-- play album -->
				<div id="play-album" ng-show="!searchPattern.length && files[files.length - 1].isAlbum" ng-click="openAlbum(false)">

					<!-- <i ng&#45;show="!isPlaying" class="material&#45;icons">play_circle_filled</i> -->
					<i ng-show="!isPlaying" class="material-icons">playlist_add</i>
					<i ng-show="isPlaying" class="material-icons">pause_circle_filled</i>
					<i ng-show="playlistMode" class="material-icons">playlist</i>
				</div>
			</div>

			<!-- file list -->
			<div id="files" ng-hide="loadingFiles" class="scrollable">

				<div
					ng-repeat="file in filteredFiles = (files[files.length - 1].subs | filter:searchPattern) track by $index"
					ng-class="{backlight: $index % 2 === 0}"
					ng-include="'sub_results.html'">
				</div>

				<script type="text/ng-template" id="sub_results.html">
					<div
						ng-click="openFile(file, $index, false)"
						ng-class="{playing: !file.isDir && isOpen (file.path)}"
						class="clickable files">

						<i ng-show="file.isDir && !file.isAlbum" class="material-icons md-18">folder</i>
						<i ng-show="file.isAlbum" class="material-icons md-18">album</i>
						<i ng-show="!file.isDir" class="material-icons md-18">music_note</i>
Â 						{{file.name}}
					</div>
					<div
						ng-if="searchPattern.length > 2 && filteredFiles.length < 10"
						ng-repeat="file in filteredFiles = (file.subs | filter:searchPattern) track by $index"
						ng-include="'sub_results.html'">
					</div>
				</script>

			</div>
		</div>

		<div id="side-info">

			<div id="nav-btn">
				<div id="playlist-btn" ng-click="togglePlaylist()">Playlist</div>
				<div id="lyrics-btn" ng-click="toggleLyrics()">Lyrics</div>
			</div>


			<!-- playlist -->
			<div ng-show="showPlaylist" id="playlist" class="scrollable">
				<div ng-repeat="file in playlist track by $index"
					 ng-click="playItem ($index)"
					 ng-class="{backlight: $index % 2 === 0, playing: !isDir && isOpen (file.path)}"
					 class="files">
					{{file.name}}
				</div>
			</div>

			<!-- lyrics -->
			<div ng-show="showLyrics" id="lyrics" class="scrollable">
				<div ng-bind-html="lyrics"></div>
			</div>
		</div>

		<!-- player -->
		<div id="player">

			<div id="prog-bar" ng-click="goTo($event)">
				<div id="prog-lvl">
				</div>
			</div>

			<div
				ng-click="prev()"
				class="player-btn clickable">

				<i class="material-icons">skip_previous</i>
			</div>

			<div
				ng-click="togglePause()"
				class="player-btn clickable">
				<i ng-show="isPlaying" class="material-icons">pause</i>
				<i ng-show="!isPlaying" class="material-icons">play_arrow</i>
			</div>

			<div
				ng-click="next()"
				class="player-btn clickable">

				<i class="material-icons">skip_next</i>
			</div>

			<!-- gestion du volume -->
			<div id="vol" ng-mouseleave="showVol = false">
				<!-- bar de volume -->
				<div
					id="vol-bar"
					ng-mousedown="volTo($event)"
					ng-show="showVol">
					<div id="vol-lvl"></div>
				</div>
				<!-- bouton de volume -->
				<div
					id="vol-btn"
					ng-mouseover="showVol = true"
					ng-click="mute(!isMuted)"
					class="player-btn">
					<!-- not muted -->
					<i ng-show="!isMuted" class="material-icons">volume_up</i>
					<!-- muted -->
					<i ng-show="isMuted" class="material-icons muted">volume_off</i>
				</div>
			</div>
		</div>
	</body>

	<script src="js/init.js"></script>
	<script src="js/getLyrics.js"></script>
	<script src="../node_modules/angular/angular.js"></script>
	<script src="../node_modules/angular-sanitize/angular-sanitize.js"></script>
	<script src="js/app.js"></script>

</html>
